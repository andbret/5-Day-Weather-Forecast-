<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta https-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
      integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous" /> -->
    <!-- <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet" /> -->
    <link rel="stylesheet" href="style.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>Work Day Scheduler</title>
</head>

<body">
    <nav class="navbar fixed-top navbar-dark bg-dark">
        <span class="navbar-brand mb-0 h1">Weather Dashboard</span>
    </nav>

    <div class="sidenav">
        <form class="form-inline" id="movie-form">
            <label for="movie-input">Search for a City</label>
            <input class="form-control mr-sm-2" type="text" id="movie-input" aria-label="Search" id="add-movie">
            <button class="btn success my-2 my-sm-0" type="submit" value="Add a Movie, Yo!"
                id="add-movie">Save</button>
            <br><br>
        </form>



        <div class="list-group mt-1" id="buttons-view">
            

        </div>
    </div>

    <main class="main">
        <div class="jumbotron">
            <div class="row">
                <div class="city"></div>
                <!-- <h1 class="dayOneDate">" "</h1> -->
                <img class="condition1"></img>

            </div>
            <div class="row">
                <div class="wind"></div>
            </div>
            <div class="row">
                <div class="humidity"></div>
            </div>

            <div class="row">
                <div class="temp"></div>
            </div>
            <div class="row">
                <a>UV Index: </a> &nbsp; 
                <a class="UV"></a>
            </div>
        </div>
        <!-- cards -->

        <div class="container">
            <div class="row">
                <div class="col-sm">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title dayTwoDate">Card title</h5>
                            <img class="condition2"></img>
                            <p class="card-text temp2"></p>
                            <p class="card-text humidity2"></p>

                        </div>
                    </div>
                </div>
                <div class="col-sm">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title dayThreeDate">Card title</h5>
                            <img class="condition3"></img>
                            <p class="card-text temp3"></p>
                            <p class="card-text humidity3"></p>
                        </div>
                    </div>
                </div>
                <div class="col-sm">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title dayFourDate">Card title</h5>
                            <img class="condition4"></img>
                            <p class="card-text temp4"></p>
                            <p class="card-text humidity4"></p>
                        </div>
                    </div>
                </div>
                <div class="col-sm">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title dayFiveDate">Card title</h5>
                            <img class="condition5"></img>
                            <p class="card-text temp5"></p>
                            <p class="card-text humidity5"></p>
                        </div>
                    </div>
                </div>
                <div class="col-sm">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title daySixDate">Card title</h5>
                            <img class="condition6"></img>
                            <p class="card-text temp6"></p>
                            <p class="card-text humidity6"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </main>





    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">
        // Initial array of movies
        var movies = ["Atlanta", "Millville", "Philadelphia", "Columbus"];
      
        // var SameSite=None;
        var test = ["Asheville"];

        var concat = movies.concat(test);


        // displayMovieInfo function re-renders the HTML to display the appropriate content
        function displayMovieInfo() {
           
            var movie = $(this).attr("data-name");
            
            // var queryURL = "https://www.omdbapi.com/?t=" + movie + "&apikey=trilogy";
            var queryURL = "https://api.openweathermap.org/data/2.5/forecast?q=" + movie + "&appid=76cb6b1a3f9dd1794777dd0869a8066c";

            // var queryURL = "https://www.omdbapi.com/?t=" + movie + "&apikey=trilogy";

            // Creating an AJAX call for the specific movie button being clicked
            $.ajax({
                url: queryURL,
                method: "GET"
            }).then(function (forecastData) {
                console.log(forecastData.list);
                // THIS WILL LOAD ALL DATA ONTO JUMBOTRON AND CARDS
                // Creating a div to hold the movie
                // DAY 1

                var dayOneDate = forecastData.list[0].dt_txt;

                var dayOneDate2 = dayOneDate.substr(0, 10,);

                var day1Date = (dayOneDate2.substr(5,));
                var year = "-2020";
                var date1 = day1Date.concat(year);
                console.log(date1)
                var city = forecastData.city.name;
                var lat = forecastData.city.coord.lat;
                var lon = forecastData.city.coord.lon;
                var condition1 = forecastData.list[0].weather[0].icon;
                var windSpeed = forecastData.list[0].wind.speed;
                var humidity = forecastData.list[0].main.humidity;
                var tempK = forecastData.list[0].main.temp;
                // Fahrenheit: F = (K - 273.15) * 1.80 + 32
                var tempF = ((tempK - 273.15) * 1.80 + 32).toFixed(2);
              

                console.log(condition1);
                console.log("Wind Speed: " + windSpeed);
                console.log("Humidity: " + humidity);
                console.log("Temp (K): " + tempK);
                console.log("Temp (F): " + tempF);
                var condition = forecastData;
                $(".dayOneDate").text(date1);
                $(".condition1").attr("src", "https://openweathermap.org/img/wn/" + condition1 + "@2x.png");
                $(".city").html("<h1>" + city + " (" + date1 + ")" + "</h1>");
                $(".wind").text("Wind Speed: " + windSpeed);
                $(".humidity").text("Humidity: " + humidity);
                $(".temp").html("Temperature (F): " + tempF + "&deg;");

                var queryURL2 = "https://api.openweathermap.org/data/2.5/uvi?appid=76cb6b1a3f9dd1794777dd0869a8066c&lat=" + lat + "&lon=" + lon + "";
                $.ajax({
                    url: queryURL2,
                    method: "GET"
                }).then(function (uvData) {
                    console.log(uvData.value);
                    var uv = uvData.value;
                    $(".UV").text("  " + uv + "");
                    parseInt(uv);
                    console.log(uv);
                    if (uv <= 2) {
                        $(".UV").css('background-color', 'lightgreen');
                    }
                    else if (uv > 2 && uv <= 5) {
                        $(".UV").css('background-color', 'deepskyblue');
                    }
                    else if (uv > 5 && uv <= 7) {
                        $(".UV").css('background-color', 'lightsalmon');
                    }
                    else if (uv > 7 && uv <= 10) {
                        $(".UV").css('background-color', 'lightcoral');
                    }
                    else if (uv > 10) {
                        $(".UV").css('background-color', 'mediumorchid');
                    }

                });




                // DAY 2
                var dayTwoDate = forecastData.list[5].dt_txt;

                var dayTwoDate2 = dayTwoDate.substr(0, 10,);

                var day2Date = (dayTwoDate2.substr(5,));
                var year = "-2020";
                var date2 = day2Date.concat(year);

                //   var windSpeed2 = forecastData.list[5].wind.speed;
                var humidity2 = forecastData.list[5].main.humidity;
                var tempK2 = forecastData.list[5].main.temp;
                var tempF2 = ((tempK2 - 273.15) * 1.80 + 32).toFixed(2);
                var condition2 = forecastData.list[5].weather[0].icon;
              
                console.log(dayTwoDate);
                $(".dayTwoDate").text(date2);
                $(".condition2").attr("src", "https://openweathermap.org/img/wn/" + condition2 + "@2x.png");
                $(".temp2").html("Temperature (F): " + tempF2 + "&deg;");
                //   $(".wind2").text("Wind Speed: " + windSpeed2);
                $(".humidity2").text("Humidity: " + humidity2);


        


                // DAY 3

                var dayThreeDate = forecastData.list[13].dt_txt;

                var dayThreeDate2 = dayThreeDate.substr(0, 10,);

                var day3Date = (dayThreeDate2.substr(5,));
                var year = "-2020";
                var date3 = day3Date.concat(year);
                //   var windSpeed3 = forecastData.list[5].wind.speed;
                var humidity3 = forecastData.list[13].main.humidity;
                var tempK3 = forecastData.list[13].main.temp;
                var tempF3 = ((tempK3 - 273.15) * 1.80 + 32).toFixed(2);
                var condition3 = forecastData.list[13].weather[0].icon;
                $(".dayThreeDate").text(date3);
                $(".condition3").attr("src", "https://openweathermap.org/img/wn/" + condition3 + "@2x.png");
                $(".temp3").html("Temperature (F): " + tempF3 + "&deg;");
                //   $(".wind3").text("Wind Speed: " + windSpeed3);
                $(".humidity3").text("Humidity: " + humidity3);

                // DAY 4
                var dayFourDate = forecastData.list[21].dt_txt;

                var dayFourDate2 = dayFourDate.substr(0, 10,);

                var day4Date = (dayFourDate2.substr(5,));
                var year = "-2020";
                var date4 = day4Date.concat(year);
                //   var windSpeed4 = forecastData.list[5].wind.speed;
                var humidity4 = forecastData.list[21].main.humidity;
                var tempK4 = forecastData.list[21].main.temp;
                var tempF4 = ((tempK3 - 273.15) * 1.80 + 32).toFixed(2);
                var condition4 = forecastData.list[21].weather[0].icon;
                $(".dayFourDate").text(date4);
                $(".condition4").attr("src", "https://openweathermap.org/img/wn/" + condition4 + "@2x.png");
                $(".temp4").html("Temperature (F): " + tempF4 + "&deg;");
                //   $(".wind4").text("Wind Speed: " + windSpeed4);
                $(".humidity4").text("Humidity: " + humidity4);

                // DAY 5
                var dayFiveDate = forecastData.list[29].dt_txt;
                var dayFiveDate2 = dayFiveDate.substr(0, 10,);

                var day5Date = (dayFiveDate2.substr(5,));
                var year = "-2020";
                var date5 = day5Date.concat(year);
                //   var windSpeed5 = forecastData.list[29].wind.speed;
                var humidity5 = forecastData.list[29].main.humidity;
                var tempK5 = forecastData.list[29].main.temp;
                var tempF5 = ((tempK5 - 273.15) * 1.80 + 32).toFixed(2);
                var condition5 = forecastData.list[29].weather[0].icon;
                $(".dayFiveDate").text(date5);
                $(".condition5").attr("src", "https://openweathermap.org/img/wn/" + condition5 + "@2x.png");
                $(".temp5").html("Temperature (F): " + tempF5 + "&deg;");
                //   $(".wind5").text("Wind Speed: " + windSpeed5);
                $(".humidity5").text("Humidity: " + humidity5);

                // DAY 6
                var daySixDate = forecastData.list[37].dt_txt;
                var daySixDate2 = daySixDate.substr(0, 10,);

                var day6Date = (daySixDate2.substr(5,));
                var year = "-2020";
                var date6 = day6Date.concat(year);
                //   var windSpeed6 = forecastData.list[37].wind.speed;
                var humidity6 = forecastData.list[37].main.humidity;
                var tempK6 = forecastData.list[37].main.temp;
                var tempF6 = ((tempK6 - 273.15) * 1.80 + 32).toFixed(2);
                var condition6 = forecastData.list[37].weather[0].icon;
                console.log(forecastData.list[0].weather[0].main);
                $(".daySixDate").text(date6);
                $(".condition6").attr("src", "https://openweathermap.org/img/wn/" + condition6 + "@2x.png");
                $(".temp6").html("Temperature (F): " + tempF6 + "&deg;");
                //   $(".wind6").text("Wind Speed: " + windSpeed6);
                $(".humidity6").text("Humidity: " + humidity6);


            });

        }

        // Function for displaying movie data
        
        // This function handles events where a movie button is clicked
        $("#add-movie").on("click", function (event) {
            if (test != storedTodos){
               var test = ["Asheville"];
            };
        
            // }
            // else{}
           console.log(test);
           console.log();
            event.preventDefault();
            console.log("HOLY FUCC");
            // This line grabs the input from the textbox
            var testy = $("#movie-input").val().trim();
            $('#movie-input').val('')
            // Adding movie from the textbox to our array
            console.log(testy);
            test.push(testy);
            console.log(test);
            console.log(testy);
            console.log("HOLY FUCC2");
            localStorage.setItem("todos", JSON.stringify(test));
     
            // Calling renderButtons which handles the processing of our movie array
            renderButtons();
        });

        function renderButtons() {
            // document.getElementById("clear").reset();
            var storedTodos = JSON.parse(localStorage.getItem("todos"));
            
            if (test != null){
    var test = storedTodos;
    }
    else{
       var test = ["Asheville"];
    }
            

            console.log(storedTodos);
            console.log(test);
            test = storedTodos;
            console.log(test);
            // Deleting the movies prior to adding new movies
            // (this is necessary otherwise you will have repeat buttons)
            $("#buttons-view").empty();
           
            var concat = movies.concat(test);
            // Looping through the array of movies
            
            console.log(movies.length);
            for (var i = 0; i < concat.length; i++) {

                // Then dynamicaly generating buttons for each movie in the array
                // This code $("<button>") is all jQuery needs to create the beginning and end tag. (<button></button>)
                var a = $("<a>");
                // Adding a class of movie-btn to our button
                a.addClass("movie-btn");
                a.addClass("list-group-item");
                a.addClass("list-group-item-action");
                // Adding a data-attribute
                a.attr("data-name", concat[i]);
                a.attr("id", concat[i]);
                // Providing the initial button text
                a.text(concat[i]);
                // Adding the button to the buttons-view div
                $("#buttons-view").append(a);
                console.log(concat);
            }
            // <a href="#" class="list-group-item list-group-item-action">Vestibulum at eros</a>
        }


        // Adding a click event listener to all elements with a class of "movie-btn"
        $(document).ready(function(){
console.log("HELLO WORLD");
var storedTodos = JSON.parse(localStorage.getItem("todos")); 
    
    if (test = null){
    var test = storedTodos;
    }
    else{
      var test = ["Asheville"];
    }
    $("#Atlanta").trigger('click');
    console.log("HELLO WORLD");
    // var storedTodos = JSON.parse(localStorage.getItem("todos")); 
    console.log(storedTodos);
    // var test = storedTodos;
    console.log(test);
    console.log(concat);

});
        $(document).on("click", ".movie-btn", displayMovieInfo);
        var storedTodos = JSON.parse(localStorage.getItem("todos")); 
    
        if (test != null){
        var test = storedTodos;
        }
        else{
           var test = ["Asheville"];
        }
        console.log("AAAAAAA");
        console.log(test);
        // Calling the renderButtons function to display the initial buttons
        renderButtons();
    
    </script>
</body>

</html> 